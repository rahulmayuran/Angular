<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Search and Book</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body>
    
    <h3 class="navbar bg-primary">User Home
        <div class="btn btn-group">
            <button class="btn btn-light" (click) = "searchFlights()">Search & Book</button>
            <button class="btn btn-light" (click) = "manageBookings()">Manage Bookings</button>
        </div>
    </h3>

    <form [formGroup] = searchForm>
            
        <div class="jumbotron">
    
    <h5 class="navbar bg-warning clearfix">Search Flights</h5>

    <!-- One Way and Round Trip -->
    <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1" checked>
        <label class="form-check-label" for="inlineRadio1">One-Way</label>
      </div>
      <div class="form-check form-check-inline">
        <input class="form-check-input"  type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2">
        <label class="form-check-label" for="inlineRadio2">Round-Trip</label>
      </div>

      <!-- Search inputs -->
    <table class="table table-primary table-striped table-hover">
        <thead>
            <tr >
             <th>From</th>
              <th>To</th>
              <th>Date of journey</th>
              <th>Date of Return</th>
            </tr>
        </thead>
    
        <tbody>
                <tr >
                    <td>
                        <select [(ngModel)]="resultFlight.journey" formControlName ="journey" class="form-select" aria-label="Default select example">
                            <option selected disabled>-CHOOSE JOURNEY-</option>
                            <option *ngFor="let r of resultFlight" >{{r.journey}}</option> 
                          </select>
                    </td> 
                    <td>
                        <select [(ngModel)]="flightsToSearch.destination" formControlName ="destination" class="form-select" aria-label="Default select example">
                            <option selected disabled>-CHOOSE DESTINATION-</option>
                            <option *ngFor="let r of resultFlight" > {{r.destination}} </option> 
                        </select>
                    </td>
                    <td>
                        <input type="date" value="start">
                    </td>
                    <td>
                        <input type="date" value="end">
                    </td>
                    <td >
                            <button class="btn btn-success"  type="submit" (click)="SearchFlightsByPlace(flightsToSearch.journey,flightsToSearch.destination)">Search Flight</button>
                    </td>
                </tr>
            </tbody>

    </table>
<br/>

<hr/>

<h5 class="navbar bg-warning clearfix">Flight Search Results</h5>

<table class="table table-primary table-responsive table-hover">
    <thead>
        <tr>
            <th>Provider<th> 
            <th>Flight Price <th> 
            <th>Seats available<th> 
            <th>Start Time<th> 
            <th>End Time<th> 
        </tr>
    </thead>
    <tbody>
        <tr *ngFor = "let f of resultFlightBasedOnSearch">
            <td>{{f.airline?.airlineLogo}}</td>
            <td>{{f.noOfSeats}} seats</td> 
            <td>â‚¹{{f.price}}</td> 
            <td>{{f.journey}}</td> 
            <td>{{f.destination}}</td> 
            <td>
                <button class="btn btn-success"  type="submit" (click)="bookFlightAddPassengers()">Start Booking</button>
            </td> 
        </tr>   
     </tbody>
    </table>

    </div>

</form>

    <form [formGroup] = bookForm >
        <div class="jumbotron">
            <h5 class="navbar bg-warning clearfix">Book Flights</h5> 
        </div>
    </form>

</body>
</html>

