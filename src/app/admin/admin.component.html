<!DOCTYPE html>
<html lang="en">

<head>
    <title></title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
</head>

<body>

    <div class="container-fluid">
        <h3 class="navbar text-light bg-primary">Welcome {{sName}}
            <div class="btn btn-group">
                <button class="btn btn-dark" (click)="companyStock()">Add Company/Stock</button>
                <button class="btn btn-light text-dark" (click)="reports()">Reports</button>
            </div>
        </h3>
    </div>

    <div class="container-fluid">
        <h5>Filter Stocks by Date</h5>

        <form [formGroup]=dateForm>
            <input type="date" [(ngModel)]="resultStock.startDate" name=startDate formControlName="startDate">
            <input type="date" [(ngModel)]="resultStock.endDate" name=endDate formControlName="endDate">
            <button class="btn btn-outline-success btn-md"
                (click)="filterStocks(resultStock.startDate, resultStock.endDate)" type="submit"
                [disabled]="checkDates()" [ngStyle]="checkDates() ? {'color' : 'gray'} : {'color' : 'green'}"><i
                    class="fa fa-search"> Search </i></button>
            <button class="btn btn-outline-primary btn-md" (click)="fetchStocksBasedOnPrices()" type="submit"><i
                    class="fa fa-filter"> Filter By Company </i></button>
        </form>

        <br />
        <div class="container-fluid">
            <h4 *ngIf="filteredStocks.length==0" class="bg-danger text-white">
                {{message}}
            </h4>
            <h4 *ngIf="filteredStocks.length!=0" class="bg-success text-white">
                {{message}}
            </h4>
        </div>

        <!-- Fetch stock Details -->
        <div class="scrollbar">
            <table class="table table-striped table-hover">
                <thead *ngIf="filteredStocks.length!=0" class="thead-dark text-light">
                    <tr>
                        <th>company</th>
                        <th>Stock Id</th>
                        <th>Stock Price</th>
                        <th>Stock Date</th>
                    </tr>
                </thead>
                <tbody *ngFor="let displayStock of filteredStocks">
                    <tr>
                        <td>{{displayStock?.companyName}}</td>
                        <td>{{displayStock.stockId}}</td>
                        <td>{{displayStock.stockPrice}}</td>
                        <td>{{displayStock.stockDate| date:'dd/MM/yy h:mm:ss a'}}</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Fetch stock Details by Prices-->
        <table class="table table-striped table-hover">
            <thead *ngIf="companyStocks.length!=0" class="thead-dark text-light">
                <tr>
                    <th>company <span class="badge badge-light">{{companyStocks.length}}</span> </th>
                    <th>Average Price</th>
                    <th>Minimum Price</th>
                    <th>Maximum Price</th>
                </tr>
            </thead>
            <tbody *ngFor="let pricedStock of companyStocks">
                <tr>
                    <td>{{pricedStock.companyName}} </td>
                    <td>{{pricedStock.avgStockPrice}}</td>
                    <td>{{pricedStock.minStockPrice}}</td>
                    <td>{{pricedStock.maxStockPrice}}</td>
                </tr>
            </tbody>
        </table>

        <!-- <button class="btn btn-outline-primary btn-block" (click)="fetchStocksByAggregation()" type="submit"><i class="fa fa-bolt"> Mongo Aggregated Stock </i></button>
         <table class="table table-striped table-hover">
            <thead *ngIf="aggregatedStocks.length!=0" class="thead-dark text-light">
                <tr>
                    <th>company <span class="badge badge-light">{{aggregatedStocks.length}}</span> </th>
                    <th>Average Price</th>
                    <th>Minimum Price</th>
                    <th>Maximum Price</th>
                </tr>
            </thead>
            <tbody *ngFor="let pricedStock of aggregatedStocks">
                <tr>
                    <td>{{pricedStock.companyName}}  </td>
                    <td>{{pricedStock.avgStockPrice}}</td>
                    <td>{{pricedStock.minStockPrice}}</td>
                    <td>{{pricedStock.maxStockPrice}}</td>
                </tr>
            </tbody>
        </table> -->

    </div>


</body>

</html>